#textdomain wesnoth-Wild_Frontiers
# This file defines the generic tutorial message macro as well as all of the
# tutorial messages that are not associated with specific scenarios or events

#define TUTORIAL ID MESSAGE
	# Show a tutorial message if the tutorial is on and it has not been shown
	# already. Note that a nonexistent variable (i.e. all of the ids on the first
	# check) is never equal to yes. In most programming languages this is
	# considered poor practice, but in WML there doesn't seem to be an "exists"
	# function which is the "right" way to do this.
	[if]
		[and]
			{VARIABLE_CONDITIONAL tutorial.messages equals yes}
			{VARIABLE_CONDITIONAL tutorial.{ID} not_equals yes}
		[/and]
		[then]
			[message]
				speaker=narrator
				#image="wesnoth-icon.png"
				image=portraits/delfador-mentoring.png
				message={MESSAGE}
			[/message]
			{VARIABLE tutorial.{ID} yes}
		[/then]
	[/if]
#enddef

# ----- Non-scenario-specific events -----------------------------------
#define TUTORIAL_MESSAGES

	# Recommend bridges if you move into water
	[event]
		name=moveto
		[filter]
			side=1
			[filter_location]
				terrain=W*
			[/filter_location]
		[/filter]
		{TUTORIAL water_move _"As you move across the lakes and streams of you new territory, consider building bridges across them. While early on bridges are simply a convenience, when streams flood in the spring bridges can be the only way to avoid being cut off from a part of your town.

To build a bridge, move some Peasant Workers into a water hex, right-click on them, and select 'Build a bridge...'"}
	[/event]

	# Tell you about un-recruiting units
	[event]
		name=recruit
		[filter]
			side=1
			type=Bowman,Cavalryman,Horseman,Fencer,Sergeant,Mage,Rogue Mage,Dark Adept
		[/filter]
		{TUTORIAL unrecruit1 _"Since most units require upkeep, there may be some times when you no longer wish to support them. In that case, move the 'un-desired' unit back to your castle, right click on them, and tell them to 'Stand down.' Note that your leader must be standing on the keep in order for this to work. You can ask any of your units to stand down, including your Peasant Workers."}
		{TUTORIAL unrecruit2 _"When your units stand down, they are moved to your recall list. Since you must pay the standard 20 gold to recall a unit, you should only have them stand down when you believe you will not require their services for a number of turns."}
	[/event]

	# Careful with those loyal units
	[event]
		name=attack end
		[filter]
			id=loyal_swordsman,loyal_cavalry,loyal_bowman
		[/filter]
		{TUTORIAL careful_with_loyals _"Be cautious when fighting with your loyal units. Their survival is crucial to your success, as their lack of upkeep cost means you can always keep them active."}
	[/event]

	[event]
		name=built_forge
		{TUTORIAL built_forge1 _"With the completion of your Blacksmith's forge, you are now able to recruit Spearmen from your keep. Building another Blacksmith's forge will allow you to recruit Fencers. Note that if your Blacksmith is ever destroyed, you will lose this ability (although you will retain all of your existing units.)

Later you may wish to build a bowyer's workshop and stables, allowing you to recruit bowmen and cavalrymen, respectively. Since you have limited gold to start with, however, it may be best to wait before doing so."}
		{TUTORIAL built_forge2 _"Now that you can recruit soldiers to defend your new town, you should start building it up. Move your Peasant Workers to the center of a 3 by 3 region of flat hexes and tell them to start building a farm.

Farms are villages surrounded by farm terrain. The villages you construct are your major sources of income during this campaign."}
	[/event]

	[event]
		name=recruit
		[filter]
			type=Spearman,Heavy Infantryman
			side=1
		[/filter]
		{TUTORIAL infantry_recruit _"You should generally keep a few units such as this one around in order to guard the perimeter and quickly react to new threats to your town. Recruiting too many, however, will lead to excessive upkeep costs. Until you have built a few farms with your Peasant Workers, you should defend with a mix of Peasants and level 1 soldiers."}
	[/event]

	[event]
		name=built_armorer
		{TUTORIAL built_armorer1 _"With the completion of your Armorer, you are now able to recruit Heavy Infantrymen from your keep. Building another Armorer will allow you to recruit Sergeants. Note that if your Armorer is ever destroyed, you will lose this ability (although you will retain all of your existing units.)"}
	[/event]

	[event]
		name=built_library
		{TUTORIAL built_library1 _"With the completion of your Library, you are now able to recruit Mages from your keep. Building other Libraries will allow you to further recruit Rogue Mages and Dark Adepts. Note that if your Library is ever destroyed, you will lose this ability (although you will retain all of your existing units.)"}
		{TUTORIAL built_library2 _"Mages and other Library recruits can cast protection runes on the ground. The protection rune's damage type could be arcane, cold or fire. The damage type depends on the unit that cast it and the time of activation. Right-click on the Mage to cast the protection runes."}
		{TUTORIAL built_library3 _"Rogue Mages can be used to destroy structures and even mountains. Move the Rogue Mage on the unwanted structure tile then right-click on it to burn it down.

Recruiting Dark Adepts will incur a penalty and increase the cost of the King's Troops."}
		# Dialogue by toannghe1997
		{DIALOGUE library_hire (
				{ADVISOR_SAYS _"My lord, did you know that there are mages specialized in long-range communication?"}
				{HERO_SAYS _"Yes, they were the ones sending out his highness messages to my family after all. I have also seen several of them working at the royal palace."}
				{CYNIC_SAYS _"<i>*chuckle*</i> Magic has certainly brought about great benefits to our kingdom, hasn't it? When I was but a lad, I wouldn't have believed that mages would be able to raise mountains out of thin air..."}
				{ADVISOR_SAYS _"Well, let's stay on topic for now. Having friends that we can rely on out here at the frontier is more important than you can imagine. As such, his highness has given us permission to make contact with other kingdoms and establish friendly ties with them."}
				{ADVISOR_SAYS _"As an ally, they can send their mercenaries to fight for us or even mobilize a large group of veterans to our aid. Caravans heading towards friendly territory will also be able to trade their goods at a better price as well!"}
				{ADVISOR_SAYS _"Of course, the opposite holds true. It's best that you choose your friends carefully, my lord..."}
				{TUTORIAL built_library4 _"Move Lord $wf_vars.hero_name| over to the library, then right-click on him to hire mercenaries."}
				{TUTORIAL built_library5 _"Completing specific tasks assigned by a faction will make them more friendly towards you. Being allied to a faction will give you the most benefits, though there can also be several drawbacks."}
				{TUTORIAL built_library6 _"The lush forests of the elves lie west of your town. To the east, massive dwarvish strongholds span the entire mountain ranges, protecting their luxurious mines. The Northern Alliance controls most of the north, though there has been several disputes between your kingdom and theirs. Finally, you came from the west, carrying proud Wesnothian blood in your vein."}
				{TUTORIAL built_library7 _"There are also minor factions such as outlaws, undead, orcs, saurians and drakes. They don't have a kingdom to call their own, yet rumors speak of influential individuals holding control over the majority of each group."}
				{NARRATOR_SAYS _"The king has given you his blessing to make contact with kingdoms of elves, dwarves or the Northern Alliance. Some merchants are curious about the drakes and saurians, yet these races rarely show any interest towards trading with humans. Outlaws roam the highways to steal goods from caravans, while orcs and undeads will even rob the innocent of their life."}
				#{NARRATOR_SAYS _"Choose your allies carefully, for it could also determine your enemies as well."}
				{ADVISOR_SAYS _"When you initiate negotiation with anyone for the first time, you will have to send them some gifts first. Some gold from our treasury should convince them of our good will."}
				{HERO_SAYS _"Alright. After I make a decision, I will talk to you again."}
				{FOOL_SAYS _"By the way, you were joking about the mages and mountains, right?"}
				{CYNIC_SAYS _"Let a mage stand on top the hill and you can see for yourself."}
		)}
	[/event]

	[event]
		name=built_bowyer
		{TUTORIAL built_bowyer1 _"With the completion of your Bowyer's Workshop, you are now able to recruit Bowmen from your keep. Note that if your Bowyer's Workshop is ever destroyed, you will lose this ability (although you will retain all of your existing units.)"}
	[/event]

	[event]
		name=built_stables
		{TUTORIAL built_stables1 _"With the completion of your Stables, you are now able to recruit Cavalrymen from your keep. Building another Stables will allow you to recruit Horsemen. Note that if your Stables is ever destroyed, you will lose this ability (although you will retain all of your existing units.)"}
	[/event]

	[event]
		name=built_lighthouse
		{TUTORIAL built_lighthouse1 _"With the completion of your Lighthouse, you are now able to call on the assistance of your allies with the cost of {KING_COST} gold. Right-click on the lighthouse to call for help."}
	[/event]

	[event]
		name=built_windmill
		{TUTORIAL built_windmill1 _"With the completion of your Windmill, you are now able to engage in trade with the rest of the kingdom. At the second turn of each season, a caravan carrying goods will be readied for transport to the edge of the map. Move the caravan to the designated edge to increase your farm income and troops supports."}
		{TUTORIAL built_windmill2 _"An unoccupied windmill can also be used as a gathering point for the allied troops. The allies will not interfere with the spawning of the trade caravans. To disable letting the Troops regroup around the windmill, just leave any one of your units standing still on the windmill location or order them to disperse with the right-click."}
	[/event]
#enddef

#define TUTORIAL_WINTER
		[if]
			{VARIABLE_CONDITIONAL wf_vars.season equals 3}
			[then]
				[scroll_to_unit]
					id=Hero
				[/scroll_to_unit]
				{TUTORIAL begin_winter1 _"You have reached your first winter. The nights are now longer, so your soldiers may often need to fight in the dark. While the snows block the mountain passes and prevent orc raiding parties from reaching your town, outlaws and wild animals desparate for food will become more agressive."}
				{TUTORIAL begin_winter2 _"As no crops grow during the winter, your villages will not give you any income, although they will still provide unit upkeep. The frozen ground and snow also prevent your workers from constructing new buildings or altering the landscape. It is recommended that you have all of your non-essential units, including your Peasant Workers, stand down by moving them and $wf_vars.hero_name to your keep and right-clicking on the unit you wish to move to your recall list."}
			[/then]
		[/if]

#		[if]
#			[have_unit]
#				side=5
#			[/have_unit]
#		[then]
#			{NARRATOR_SAYS _"As the first snows of winter begin to fall, the remaining orcs and their troll minions break off their raids, needing to cross treacherous mountain passes to reach their homes. They keep only what spoils they have already taken."}
#		[/then]
#		[/if]
#enddef

#define BEGINNING_TUTORIAL
		{TUTORIAL keep_instruct1 _"Your first task in settling a new town is setting up your keep. As in other campaigns, your keep allows you to recruit and recall units. If your keep is taken and destroyed by attackers, you will lose the game."}

		{TUTORIAL keep_instruct2 _"You must build your keep on a flat hex, with another flat hex just to the north. Avoid setting up your keep too near the edge of the map, as you could easily be surprised by the appearance of a hostile army on your doorstep. Areas with plenty of flat terrain are preferable, as they will allow you to expand quickly. Locations bordering rivers or lakes will make defending your town on those sides much easier.

Use your loyal cavalry unit to scout the nearby terrain for a promising location. Waiting more than a few turns to start, however, could put your new town at a disadvantage."}

		{TUTORIAL keep_instruct3 _"You can place your keep by moving Lord $wf_vars.hero_name| to the desired location, right-clicking on him, and selecting 'Build your keep here' from the menu. Watch out for the beasts of the wilderness as you search for a suitable location!

Note: You may relocate your tent and wooden keep in the future."}
#enddef

#define BEGINNING_TUTORIAL_EVENTS
	[event]
		name=recruit
		[filter]
			side=1
			type=Peasant_no_Advance,Peasant_to_Bowman,Peasant_to_Spearman
		[/filter]
		{TUTORIAL peasant_recruit1 _"Peasants and their pitchforks may be able to keep the wolves at bay for a while, but eventually you'll need real soldiers when an orc raiding party stumbles upon your town. Recruit a few Peasants now, but soon you should need more stout defenders. As soon as you can, have one of your Peasant Worker teams build a Blacksmith's forge, allowing you to recruit Spearmen, or an Armorer, allowing you to recruit Heavy Infantrymen. Spearmen are much more versatile, so for your first playthrough it is recommended that you build a Blacksmith first."}
		{TUTORIAL peasant_recruit2 _"Peasants are invaluable as sentries. Since they have no upkeep costs, peasants can cheaply guard all approaches to your town. They can also be quite useful in holding off weaker units, particularly when augmented by the leadership ability of $wf_vars.hero_name|.

Note that in this campaign, Peasants can only level up into Spearmen and Bowmen if you have constructed the appropriate buildings (a Blacksmith and a Bowyer's Workshop, respectively)."}
	[/event]

	[event]
		name=recruit
		[filter]
			side=1
			type=Peasant Workers
		[/filter]
		{TUTORIAL workers_recruit1 _"Peasant Workers are the builders of your new town. Given enough time and supplies, they can construct farms (villages), erect fortifications of wood and stone, build bridges, and create workshops for craftsmen, allowing you to recruit new units. They can also reshape the land, cutting down forests, smoothing hillsides, draining swamps, digging moats, and paving roads."}
		{TUTORIAL workers_recruit2 _"To instruct your workers to perform any of these actions, move them to the appropriate terrain and choose the desired option from the right-click menu. It is recommended that you first build a Blacksmith's forge, which requires a 2 by 2 region of flat hexes."}
	[/event]

	[event]
		name=built_farm
		{ADD_MAP_LABEL $param.x $param.y _"First farm"}
		{TUTORIAL built_farm1 _"You have completed your first farm, which will now begin generating income for you. In the spring, farms generate $farm_income.spring gold per turn. In the summer and autumn, there will be more crops to harvest and each farm will generate $farm_income.summer and $farm_income.autumn gold per turn respectively, while in the winter farms yield no gold at all. Depending on the season, farms can pay the upkeep cost for up to $farm_support.winter level one units."}
		{TUTORIAL built_farm2 _"At this point you are likely losing money each turn on upkeep costs for your units, and you may have noticed that your initial gold supply is beginning to dwindle. Survival requires that you quickly become self-sufficient, so continue building farms at least until your income becomes positive. If possible, keep 50 to 100 gold in reserve to recruit new soldiers if your town is threatened."}
		{TUTORIAL built_farm3 _"If you cannot find any nearby and defensible locations to build a new farm, you can direct your Peasant Workers to change hilly, forested, or swampy terrain to grassland. Move them onto the hex of interest, right click on them, and select the appropriate option. This will, of course, require additional time and money that could be spent instead on new villages or soldiers, so do so sparingly."}
		{TUTORIAL built_farm4 _"You can label any farm by getting Lord $wf_vars.hero_name| over to it and then right click on him."}
	[/event]

	[event]
		name=started_forge
		id=started_forge
		{TUTORIAL start_forge1 _"Your peasant workers have begun constructing a Blacksmith's forge. It will take them {FORGE_TURNS} turns to finish, and in the meantime they will be unable to move. At the beginning of your turn a number over each Workers unit will indicate how many turns remain until completion. Alternately, if you right-click on them and select the appropriate option they will give you a status update."}
		{TUTORIAL start_forge2 _"You should ensure your workers are well defended while they work. If they are attacked the project will be disrupted. While you will get the project cost returned to you, you will still lose both upkeep costs as well as valuable time."}

	        [remove_event]
	            id=started_armorer
	        [/remove_event]
	        [remove_event]
	            id=started_bowyer
	        [/remove_event]
	        [remove_event]
	            id=started_library
	        [/remove_event]
	        [remove_event]
	            id=started_stables
	        [/remove_event]
	        [remove_event]
	            id=started_farm
	        [/remove_event]
	[/event]

	[event]
		name=started_armorer
		id=started_armorer

		{TUTORIAL start_armorer1 _"Your peasant workers have begun constructing an Armorer. It will take them {ARMORER_TURNS} turns to finish, and in the meantime they will be unable to move. At the beginning of your turn a number over each Workers unit will indicate how many turns remain until completion. Alternately, if you right-click on them and select the appropriate option they will give you a status update."}
		{TUTORIAL start_armorer2 _"You should ensure your workers are well defended while they work. If they are attacked the project will be disrupted. While you will get the project cost returned to you, you will still lose both upkeep costs as well as valuable time."}

	        [remove_event]
	            id=started_forge
	        [/remove_event]
	        [remove_event]
	            id=started_bowyer
	        [/remove_event]
	        [remove_event]
	            id=started_library
	        [/remove_event]
	        [remove_event]
	            id=started_stables
	        [/remove_event]
	        [remove_event]
	            id=started_farm
	        [/remove_event]
	[/event]

	[event]
		name=started_bowyer
		id=started_bowyer

		{TUTORIAL start_bowyer1 _"Your peasant workers have begun constructing a Bowyer. It will take them {BOWYER_TURNS} turns to finish, and in the meantime they will be unable to move. At the beginning of your turn a number over each Workers unit will indicate how many turns remain until completion. Alternately, if you right-click on them and select the appropriate option they will give you a status update."}
		{TUTORIAL start_bowyer2 _"You should ensure your workers are well defended while they work. If they are attacked the project will be disrupted. While you will get the project cost returned to you, you will still lose both upkeep costs as well as valuable time."}

	        [remove_event]
	            id=started_forge
	        [/remove_event]
	        [remove_event]
	            id=started_armorer
	        [/remove_event]
	        [remove_event]
	            id=started_library
	        [/remove_event]
	        [remove_event]
	            id=started_stables
	        [/remove_event]
	        [remove_event]
	            id=started_farm
	        [/remove_event]
	[/event]

	[event]
		name=started_library
		id=started_library

		{TUTORIAL start_library1 _"Your peasant workers have begun constructing a Library. It will take them {LIBRARY_TURNS} turns to finish, and in the meantime they will be unable to move. At the beginning of your turn a number over each Workers unit will indicate how many turns remain until completion. Alternately, if you right-click on them and select the appropriate option they will give you a status update."}
		{TUTORIAL start_library2 _"You should ensure your workers are well defended while they work. If they are attacked the project will be disrupted. While you will get the project cost returned to you, you will still lose both upkeep costs as well as valuable time."}

	        [remove_event]
	            id=started_forge
	        [/remove_event]
	        [remove_event]
	            id=started_armorer
	        [/remove_event]
	        [remove_event]
	            id=started_bowyer
	        [/remove_event]
	        [remove_event]
	            id=started_stables
	        [/remove_event]
	        [remove_event]
	            id=started_farm
	        [/remove_event]
	[/event]

	[event]
		name=started_stables
		id=started_stables

		{TUTORIAL start_stables1 _"Your peasant workers have begun constructing Stables. It will take them {STABLE_TURNS} turns to finish, and in the meantime they will be unable to move. At the beginning of your turn a number over each Workers unit will indicate how many turns remain until completion. Alternately, if you right-click on them and select the appropriate option they will give you a status update."}
		{TUTORIAL start_stables2 _"You should ensure your workers are well defended while they work. If they are attacked the project will be disrupted. While you will get the project cost returned to you, you will still lose both upkeep costs as well as valuable time."}

	        [remove_event]
	            id=started_forge
	        [/remove_event]
	        [remove_event]
	            id=started_armorer
	        [/remove_event]
	        [remove_event]
	            id=started_bowyer
	        [/remove_event]
	        [remove_event]
	            id=started_library
	        [/remove_event]
	        [remove_event]
	            id=started_farm
	        [/remove_event]
	[/event]

	[event]
		name=started_farm
		id=started_farm

		{TUTORIAL start_farm1 _"Your peasant workers have begun constructing a Farm. It will take them {FARM_TURNS} turns to finish, and in the meantime they will be unable to move. At the beginning of your turn a number over each Workers unit will indicate how many turns remain until completion. Alternately, if you right-click on them and select the appropriate option they will give you a status update."}
		{TUTORIAL start_farm2 _"You should ensure your workers are well defended while they work. If they are attacked the project will be disrupted. While you will get the project cost returned to you, you will still lose both upkeep costs as well as valuable time."}

	        [remove_event]
	            id=started_forge
	        [/remove_event]
	        [remove_event]
	            id=started_armorer
	        [/remove_event]
	        [remove_event]
	            id=started_bowyer
	        [/remove_event]
	        [remove_event]
	            id=started_library
	        [/remove_event]
	        [remove_event]
	            id=started_stables
	        [/remove_event]
	[/event]
#enddef

#define AUTUMN_TUTORIAL
		[scroll_to_unit]
			id=Hero
		[/scroll_to_unit]
		{TUTORIAL begin_autumn1 _"You have reached your first autumn. You are likely to face similar foes---outlaws, orcs, and wild animals---as in the summer. No new orc leaders will arrive, but any remaining from the summer will continue to recruit new units. You are also somewhat likely to be visited by a necromancer."}
		{TUTORIAL begin_autumn2 _"In autumn, however, you should pay particular attention to your treasury and defenses. Once winter arrives your villages will not produce any income (as there are no crops to harvest), although they will still provide upkeep for your units. You will need to ensure you have enough gold to pay your soldiers throughout the long, cold winter."}
		{TUTORIAL begin_autumn3 _"Since soldiers fight poorly in the snow, try to build up encampments on the borders of your town.

Also in keeping an eye on the upcoming winter, you may want to consider building bridges and roads between any widely separated sections of town. These will increase your mobility once the rivers freeze and snow blankets the ground."}
#enddef

#define SUMMER_TUTORIAL
		[scroll_to_unit]
			id=Hero
		[/scroll_to_unit]
		{TUTORIAL begin_summer1 _"You have survived the first spring of the campaign. In the summer daylight is longer and the nights are shorter. With the summer sun also comes the likelihood of raiders descending on your town. Such raiding parties are much larger than outlaw bands. Orc raiding parties are most common, and will approach from the North or East. Unlike outlaws, orcs will also establish camps and continue to recruit new units until you hunt down and eliminate their leader. Necromancers and their undead minions may also occasionally trouble you, approaching from the South or West."}
		{TUTORIAL begin_summer2 _"In the summer your farms are more productive and generate $farm_income.summer gold per turn in addition to providing upkeep for $farm_support.summer level one unit. This increased income should allow you to recruit enough soldiers to fend off the expected attacks."}
		{TUTORIAL begin_summer3 _"In general you should focus on building up your defenses while not neglecting expansion in order to ensure an adequate supply of gold. So, avoid building up more than you can defend."}
#enddef

#define SPRING_TUTORIAL
		[scroll_to_unit]
			id=Hero
		[/scroll_to_unit]
		[if]
			{VARIABLE_CONDITIONAL wf_vars.season equals 4}
			[then]
				{TUTORIAL begin_spring1 _"Congratulations -- you have survived for a full year in Wild Frontiers!"}
				{TUTORIAL begin_spring2 _"While the weather your first spring was mild, now the melting snow has widened and deepened the streams. Without bridges, you may not be able to cross. The deep water may force enemies to take unusual routes into your town.

The melting snow will also open up the mountain passes for orcs to again raid your town."}
			[/then]
		[/if]
#enddef
